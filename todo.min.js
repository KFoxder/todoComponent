window.onload=function(){function e(e){var t=e.parentNode,n=t.getElementsByTagName("LI");if(void 0!==n&&0!==n.length){var i=document.createElement("input");i.setAttribute("type","hidden");for(var a=[],s=0;s<n.length;s++){var l=n[s].innerHTML;a.push(l.replace(/<[^>]*>/g,"").replace(/x/,"").replace(/[^a-zA-Z0-9_-\s]/g,""))}i.setAttribute("value","["+a+"]"),alert(i.getAttribute("value"));var d=t.getElementsByClassName("inputText")[0];d.setAttribute("disabled","disabled"),t.appendChild(i),t.submit()}}function t(e,t){if(13===e.keyCode){e.preventDefault();var n=t.parentNode;n.getElementsByClassName("todoAddButton")[0].click()}}function n(){var e=document.createElement("a"),t=document.createTextNode("x");return e.appendChild(t),e.className="hidden",e.id="todoClose",e.addEventListener("click",function(){var e=this.parentNode,t=e.parentNode;t.removeChild(e);var n=t.parentNode.parentNode;if(0===t.getElementsByTagName("li").length){var i=n.getElementsByClassName("todoSubmitButton")[0];i.style.visibility="hidden"}}),e}"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")});for(var i=document.getElementsByClassName("todoComponent"),a=0;a<i.length;a++){var s=i[a].getElementsByClassName("todoSubmitButton")[0];s.style.visibility="hidden",s.addEventListener("click",function(){e(this)}),i[a].getElementsByClassName("inputText")[0].addEventListener("keypress",function(e){t(e,this)}),i[a].getElementsByClassName("todoAddButton")[0].addEventListener("click",function(){var e=this.parentNode,t=e.getElementsByClassName("inputText")[0],i=t.value,a=e.getElementsByClassName("todoSubmitButton")[0];if(void 0!=i&&i.trim().length>0&&null===i.match(/[^a-zA-Z0-9_-\s]/g)){t.id="",a.style.visibility="visible";var s=e.getElementsByClassName("list")[0],l=document.createTextNode(i),d=document.createElement("LI");d.appendChild(l);var o=n();d.insertBefore(o,d.firstChild),d.addEventListener("mouseover",function(){var e=this.getElementsByTagName("a")[0];e.style.visibility="visible"}),d.addEventListener("mouseleave",function(){var e=this.getElementsByTagName("a")[0];e.style.visibility="hidden"}),s.appendChild(d),t.value=""}else t.id="illegalInput"})}};